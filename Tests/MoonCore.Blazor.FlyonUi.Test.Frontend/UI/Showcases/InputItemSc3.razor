@using MoonCore.Blazor.FlyonUi.Common
@using MoonCore.Blazor.FlyonUi.Forms

<InputItem TItem="DemoItem"
           @bind-Value="SelectedItem"
           DisplayField="@(x => x.Name)"
           ItemSource="ItemSource" />

@code
{
    private DemoItem[] Items;
    private DemoItem? SelectedItem = null;
    
    private ItemSource<DemoItem> ItemSource => ItemSourceFactory.From(GetItemsAsync);
    
    private async Task<IEnumerable<DemoItem>> GetItemsAsync(string? filter)
    {
        if(string.IsNullOrWhiteSpace(filter))
            return Items;

        return Items.Where(x => x.Name.Contains(filter, StringComparison.OrdinalIgnoreCase));
    }
    
    protected override void OnInitialized()
    {
        var items = new List<DemoItem>();

        for (var i = 0; i < 100; i++)
        {
            items.Add(new DemoItem()
            {
                Id = i,
                Name = $"Item {i}"
            });
        }

        Items = items.ToArray();
    }
    
    record DemoItem
    {
        public int Id { get; set; }
        public string Name { get; set; }
    }
}